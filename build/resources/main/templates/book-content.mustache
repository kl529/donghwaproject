<!--책 내용-->
<!--이전페이지, 다음페이지 if 마지막 페이지는 독후감쓰러가기-->
{{>layout/header}}
<h1>책 내용 페이지</h1>
{{#book}}
    <div class="row">
        <div id="bookContent">
            {{bookContent}}
        </div>
    </div>
    {{#reading}}
        <div id="readingKey" style="display: none">{{readingKey}}</div>
        <div class="row">
            <div class="col"><button id="btn-firstPage" role="button">첫 페이지로</button></div>
            <div class="col"><button id="btn-prevPage" role="button">이전 페이지로</button></div>
            <div class="col" id="currentPage">{{currentpage}}</div>
            <div class="col"><button id="btn-nextPage" role="button">다음 페이지로</button></div>
        </div>
    {{/reading}}
{{/book}}
{{^book}}
    해당 책이 존재 하지 않습니다.
{{/book}}

<script>
    var content = document.getElementById('bookContent');
    var contSplit = content.innerHTML.split(/\n\s*\n/); //더블엔터 기준으로 문단 나누기

    for(var i in contSplit){
       document.write( '<div class="pages multi" id="page_'+parseInt(parseInt(i)+1)+'"> <p>'+ contSplit[i] + '</p></div>' );
    }

    var totalPage = contSplit.length; // 나눠진 문단의 개수
    document.getElementById('bookContent').hidden='true'; // 기존 content안보이게 처리

    // 모든 페이지를 안보이게 처리
    for (let el of document.querySelectorAll('.pages')) {
        el.style.display = 'none';
    }

    // 일부 페이지만 보이게 처리
    var currentPage = Number( document.getElementById('currentPage').innerHTML );
    var targetPage = "page_" + currentPage;
    document.getElementById(targetPage).style.display = 'block';


</script>

<style>
    .multi{
        column-count : 2;
    }
</style>
{{>layout/footer}}